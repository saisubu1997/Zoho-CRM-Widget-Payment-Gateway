!function a(l,u,i){function c(t,e){if(!u[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=u[t]={exports:{}};l[t][0].call(r.exports,function(e){return c(l[t][1][e]||e)},r,r.exports,a,l,u,i)}return u[t].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)c(i[e]);return c}({1:[function(e,t,n){var c,a,s;function o(i){return new Promise(function(l,e){var t,n,u,o,r;n=localStorage.api_domain+"/crm/v"+s+"/"+i.url;var a=_.API.AUTH.getAccess();if(null==a)return l("{}");for(o in i.params&&(n=n+"?"+i.params),(u=new XMLHttpRequest).withCredentials=!0,u.open(i.type,n),u.setRequestHeader("Authorization","Zoho-oauthtoken "+a),c)u.setRequestHeader(o,c[o]);i.download_file&&(u.responseType="blob"),i.x_file_content?((r=new FormData).append("file",i.x_file_content),u.send(r)):(t=i.body||null,u.send(t)),u.onreadystatechange=function(){if(4==u.readyState)if(204==u.status){l(JSON.stringify({message:"no data",status_code:"204"}))}else if(i.download_file){var e,t=u.getResponseHeader("Content-Disposition");if(t&&-1!==t.indexOf("attachment")){var n=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t);null!=n&&n[1]&&(e=(e=n[1].replace(/['"]/g,"")).replace("UTF-8",""))}var o=u.response,r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=e,a.click()}else l(u.response)}})}function r(e,t,n,o){var r={};return r.type=n,null!=e&&(t=e.id?t.replace("{id}",e.id):t.replace("/{id}",""),e.params&&(r.params=function(e){var t,n;for(n in e)e.hasOwnProperty(n)&&(t=t?t+n+"="+e[n]+"&":n+"="+e[n]+"&");return t}(e.params)+(e.module&&o?"module="+e.module:"")),!r.params&&o&&(r.params="module="+e.module),!e.body||n!=a.POST&&n!=a.PUT||(r.body=JSON.stringify(e.body)),e.x_file_content&&(r.x_file_content=e.x_file_content),e.download_file&&(r.download_file=e.download_file)),r.url=t,r}function l(){return{convert:function(e){return o(r(e,"Leads/{id}/actions/convert",a.POST,!1))}}}function u(){return{uploadFile:function(e){return o(r(e,e.module+"/{id}/Attachments",a.POST,!1))},deleteFile:function(e){return o(r(e,e.module+"/{id}/Attachments/"+e.relatedId,a.DELETE,!1))},downloadFile:function(e){return e.download_file=!0,o(r(e,e.module+"/{id}/Attachments/"+e.relatedId,a.GET,!1))},uploadLink:function(e){return o(r(e,e.module+"/{id}/Attachments",a.POST,!1))},uploadPhoto:function(e){return o(r(e,e.module+"/{id}/photo",a.POST,!1))},downloadPhoto:function(e){return e.download_file=!0,o(r(e,e.module+"/{id}/photo",a.GET,!1))},deletePhoto:function(e){return o(r(e,e.module+"/{id}/photo",a.DELETE,!1))}}}function i(){return{get:function(e){return o(r(e,"org",a.GET,!0))}}}function d(){return{get:function(e){return o(r(e,e.module+"/{id}",a.GET,!1))},post:function(e){return o(r(e,e.module+"/{id}",a.POST,!1))},put:function(e){return o(r(e,e.module+"/{id}",a.PUT,!1))},delete:function(e){return o(r(e,e.module+"/{id}",a.DELETE,!1))},getNotes:function(e){return o(r(e,e.module+"/{id}/Notes",a.GET,!1))},getRelated:function(e){return o(r(e,e.module+"/{id}/"+e.relatedModule,a.GET,!1))},getAllDeletedRecords:function(e){return e.params?e.params.type="all":e.params={type:"all"},o(r(e,e.module+"/deleted",a.GET,!1))},getRecycleBinRecords:function(e){return e.params?e.type="recycle":e.params={type:"recycle"},o(r(e,e.module+"/deleted",a.GET,!1))},getPermanentlyDeletedRecords:function(e){return e.params?e.type="permanent":e.params={type:"permanent"},o(r(e,e.module+"/deleted",a.GET,!1))},search:function(e){return o(r(e,e.module+"/search",a.GET,!1))}}}function f(){return{getFields:function(e){return o(r(e,"settings/fields/{id}",a.GET,!0))},getLayouts:function(e){return o(r(e,"settings/layouts/{id}",a.GET,!0))},getCustomViews:function(e){return o(r(e,"settings/custom_views/{id}",a.GET,!0))},updateCustomViews:function(e){return o(r(e,"settings/custom_views/{id}",a.PUT,!0))},getModules:function(e){return o(r(e,"settings/modules"+(e&&e.module?"/"+e.module:""),a.GET,!1))},getRoles:function(e){return o(r(e,"settings/roles/{id}",a.GET,!0))},getProfiles:function(e){return o(r(e,"settings/profiles/{id}",a.GET,!0))},getRelatedLists:function(e){return o(r(e,"settings/related_lists/{id}",a.GET,!0))}}}function m(){return{get:function(e){return o(r(e,"users/{id}",a.GET,!0))}}}s=2,a={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"};var p=0;function g(){return{getAccess:function(){0==p&&(window.addEventListener("storage",function(e){"access_token"===e.key&&e.oldValue!=e.newValue&&null==e.oldValue&&location.reload(),"access_token"===e.key&&localStorage.removeItem("__auth_process")},!1),p=1,localStorage.getItem("__auth_process")&&localStorage.removeItem("__auth_process"));var e=localStorage.getItem("access_token"),t=localStorage.getItem("__token_init");null!=t&&null!=e&&Date.now()>=parseInt(t)+33e5&&(e=null,localStorage.removeItem("access_token"));var n=localStorage.getItem("__auth_process");if(null==e&&null==n){var o=document.getElementById("zes_client_scope").getAttribute("data-accounts-url"),r="/oauth/v2/auth",a=localStorage.getItem("full_grant");null!=a&&"true"==a&&null!=localStorage.getItem("__token_init")&&(r+="/refresh");for(var l=document.getElementById("zes_client_scope").getAttribute("data-clientid"),u=document.getElementById("zes_client_scope").getAttribute("data-scope"),i=window.location.pathname,c=window.location.origin,s=i.split("/"),d=s.length,f=0;f<d-2;f++)c+=s[f]+"/";if("127.0.0.1"!=location.hostname&&"localhost"!=location.hostname&&""!=location.hostname||(c+="app/"),c+="redirect.html",!l||!u)throw"missing auth params[clientId, redirectUri, scope]";localStorage.setItem("__token_init",Date.now()),localStorage.removeItem("access_token"),localStorage.setItem("__auth_process","true");window.open(o+r+"?scope="+u+"&client_id="+l+"&response_type=token&state=zohocrmclient&redirect_uri="+c)}return e},revokeAccess:function(){localStorage.removeItem("crm_access_token")}}}var _={API:{AUTH:new g,RECORDS:new d,SETTINGS:new f,ACTIONS:new l,USERS:new m,ORG:new i,ATTACHMENTS:new u},init:function(e){e.constructor==={}.constructor&&e.hasOwnProperty("full_grant")&&1==e.full_grant&&localStorage.setItem("full_grant","true")}}},{}]},{},[1]);